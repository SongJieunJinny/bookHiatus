<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
			"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bookGap.mapper.AddressMapper">
	  <!-- 배송지 목록 조회 -->
  <select id="selectUserAddresses" parameterType="string" resultType="com.bookGap.vo.UserAddressVO">
    SELECT 
      USER_ADDRESS_ID AS userAddressId,
      USER_ID AS userId,
      ADDRESS_NAME AS addressName,
      POST_CODE AS postCode,
      ROAD_ADDRESS AS roadAddress,
      DETAIL_ADDRESS AS detailAddress,
      IS_DEFAULT AS isDefault,
      USER_NAME AS userName,
      USER_PHONE AS userPhone
    FROM USER_ADDRESS
    WHERE USER_ID = #{userId}
    ORDER BY IS_DEFAULT DESC, USER_ADDRESS_ID DESC
  </select>

  <!-- 배송지 추가 -->
  <insert id="insertUserAddress" parameterType="com.bookGap.vo.UserAddressVO">
    INSERT INTO USER_ADDRESS 
      (USER_ID, ADDRESS_NAME, POST_CODE, ROAD_ADDRESS, DETAIL_ADDRESS, IS_DEFAULT, USER_NAME, USER_PHONE)
    VALUES 
      (#{userId}, #{addressName}, #{postCode}, #{roadAddress}, #{detailAddress}, #{isDefault}, #{userName}, #{userPhone})
  </insert>

  <!-- 배송지 삭제 -->
  <delete id="deleteUserAddress" parameterType="map">
    DELETE FROM USER_ADDRESS
    WHERE USER_ADDRESS_ID = #{userAddressId} AND USER_ID = #{userId}
  </delete>
</mapper>