<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
			"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bookGap.mapper.guestMapper"> 

  <insert id="insertGuest" parameterType="com.bookGap.vo.GuestVO">
	  INSERT INTO GUEST (
	    GUEST_ID, 
	    GUEST_NAME, 
	    GUEST_PHONE,
	    GUEST_EMAIL,
	    GUEST_CREATED_AT
	  ) VALUES (
	    #{guestId}, 
	    #{guestName}, 
	    #{guestPhone},
	    #{guestEmail},
	    NOW()
	  )
  </insert>
  
  <!-- 이메일로 기존 비회원 정보 찾기 -->
	<select id="findGuestByEmail" parameterType="string" resultType="com.bookGap.vo.GuestVO">
    SELECT GUEST_ID AS guestId, 
           GUEST_NAME AS guestName, 
           GUEST_PHONE AS guestPhone, 
           GUEST_EMAIL AS guestEmail
      FROM GUEST
     WHERE GUEST_EMAIL = #{value}
     LIMIT 1
	</select>

</mapper>