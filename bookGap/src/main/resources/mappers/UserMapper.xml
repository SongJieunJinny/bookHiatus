<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
			"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bookGap.mapper.userMapper">
	<select id="selectOneById" parameterType="String" resultType="java.util.Map">
		SELECT USER_ID        AS userId,
			  	 USER_PW        AS userPw,
			 		 USER_ENABLED   AS userEnabled, 
			  	 USER_AUTHORITY AS userAuthority,
			  	 USER_STATE     AS userState,
			  	 USER_NAME      AS userName,
			     USER_JOIN_DATE AS userJoinDate,
			  	 USER_PHONE     AS userPhone,
			     USER_EMAIL     AS userEmail,
			     COMPLAIN_NO    AS complainNo
		 FROM  USER  
		 WHERE USER_ID = #{userId} 
	</select>
	
	<insert id="insertUser" parameterType="userInfoVO">
		INSERT INTO USER (
			   USER_ID 
			  ,USER_PW
			  ,USER_ENABLED 
			  ,USER_AUTHORITY 
			  ,USER_NAME 
			  ,USER_PHONE 
			  ,USER_EMAIL 
			  ,USER_JOIN_DATE
			) 
			VALUES (
			 #{userId}
			,#{userPw}
			,1
			,'ROLE_USER'
			,#{userName}
			,#{userPhone}
			,#{userEmail}
			,now()
			);
	</insert>
	
	<select id="selectAllUser" resultType="userInfoVO">
		SELECT USER_ID AS userId, 
					 USER_NAME AS userName, 
					 USER_PHONE AS userPhone, 
					 USER_EMAIL AS userEmail, 
					 USER_JOIN_DATE AS userJoinDate, 
					 NOTE AS note
			FROM USER   
		 ORDER BY USER_JOIN_DATE DESC
	</select>
	
</mapper>
